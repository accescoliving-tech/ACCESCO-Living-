<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Grokly Market</title>

<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet">

<style>
:root{
  --bg:#f8fafc;
  --primary:#700457;
  --text:#111827;
  --muted:#6b7280;
  --border:#e5e7eb;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Outfit',sans-serif;
  background:var(--bg);
  color:var(--text);
}

main{
  max-width:1200px;
  margin:auto;
  padding:16px 12px 90px;
}

/* ================= HEADER ================= */
header{
  position:sticky;
  top:0;
  background:var(--bg);
  z-index:10;
}

.header-top{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

/* ================= LOGO STYLING ================= */
/* Update your .brand and .logo styles */
.brand {
  display: flex;
  align-items: center;
  gap: 10px; /* Space between logo and text */
}

.logo {
  height: 32px; /* Fixed height for consistency */
  border-radius: 8px; /* Softer look for the green icon box */
}

.subtitle {
  font-size: 14px;
  color: #64748b; /* Slate-500: softer than pure black/muted */
  margin-top: -2px; /* Pulls subtitle closer to the brand name */
}

.location{
  padding:8px 12px;
  background:white;
  border-radius:12px;
  border:1px solid var(--border);
}

/* Search */
.header-row{
  display:flex;
  gap:10px;
  margin-top:12px;
  background:white;
  padding:10px;
  border-radius:16px;
  border:1px solid var(--border);
}

.search-bar{
  flex:1;
  background:#f1f5f9;
  padding:12px 14px;
  border-radius:14px;
  display:flex;
  gap:8px;
}

.search-bar input{
  border:none;
  background:none;
  width:100%;
  outline:none;
}

.icon-btn{
  width:44px;
  height:44px;
  border-radius:14px;
  border:1px solid var(--border);
  background:white;
  display:grid;
  place-items:center;
  position:relative;
  cursor:pointer;
}

.cart-badge{
  position:absolute;
  top:-6px;
  right:-6px;
  background:var(--primary);
  color:white;
  font-size:11px;
  width:18px;
  height:18px;
  border-radius:50%;
  display:grid;
  place-items:center;
}

.filter-modal {
  display: none;               /* üîë REQUIRED */
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  z-index: 50;
}

.filter-modal.show {
  display: flex;
}


/* ================= BANNER ================= */
/* ================= FIXED BANNER CONTENT ================= */
.banner-card {
  position: relative;
  width: 100%;
  height: 180px; 
  border-radius: 24px; /* Matches your rounded image style */
  overflow: hidden;
  display: flex;
  align-items: flex-end; /* üîë Pulls content to the bottom */
  color: white;
}

.banner-img {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 1; /* Lowest layer */
}

.banner-overlay {
  position: absolute;
  inset: 0;
  /* üîë Darkens the bottom more to make white text pop */
  background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 60%);
  z-index: 2; 
}

.banner-content {
  position: relative;
  z-index: 10; /* üîë Highest layer so it's always visible */
  padding: 20px 24px; /* More top padding moves text "little below" */
  width: 100%;
}

.banner-content h2 {
  margin: 0;
  font-size: 24px;
  font-weight: 800;
  line-height: 1.2;
}

.banner-content p {
  margin: 5px 0 0;
  font-size: 15px;
  font-weight: 400;
  opacity: 0.9;
}
/* ================= CATEGORY ================= */
.section-title{
  font-size:15px;
  font-weight:700;
  margin:14px 0 8px;
}

.topic-row {
  display: flex;
  gap: 10px;
  overflow-x: auto;
  padding: 8px 4px;      
  min-height: 44px;      
  align-items: center;   
}

/* ================= IMPROVED CATEGORY ROW ================= */
.topic-row {
  display: flex;
  gap: 12px;
  overflow-x: auto; /* üîë Allows horizontal swiping */
  padding: 10px 4px;
  scrollbar-width: none; /* Hides scrollbar for Firefox */
  -ms-overflow-style: none; /* Hides scrollbar for Edge */
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
}

/* Hide scrollbar for Chrome/Safari */
.topic-row::-webkit-scrollbar {
  display: none;
}

.topic-pill {
  flex: 0 0 auto; /* üîë Prevents pills from shrinking to fit */
  padding: 10px 18px;
  border-radius: 14px;
  background: white;
  border: 1px solid var(--border);
  color: var(--text-muted);
  font-size: 13px;
  font-weight: 600;
  white-space: nowrap; /* üîë Forces text to stay on one line */
  cursor: pointer;
  transition: all 0.3s ease;
}

.topic-pill.active {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
  box-shadow: 0 4px 12px rgba(112, 4, 87, 0.15);
}
/* ================= PRODUCTS ================= */
.grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:16px;
}

.card{
  background:white;
  border-radius:16px;
  border:1px solid var(--border);
  padding:10px;
}

.card-img{
  height:100px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.card-img img{
  max-width:100%;
  max-height:100%;
  object-fit:contain;
}

.card-title{font-size:13px;font-weight:600}
.card-desc{font-size:11px;color:var(--muted)}

.card-footer{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.add-btn{
  background:var(--primary);
  color:white;
  border:none;
  padding:5px 14px;
  border-radius:999px;
  font-size:11px;
  cursor:pointer;
}

/* ================= CART ================= */
.side-cart {
  position: fixed;
  top: 10px;        /* Added gap from top */
  right: -360px;    /* Hidden position */
  width: 340px;     /* Made it slimmer */
  height: calc(100vh - 20px); /* Leave gap at top and bottom */
  
  display: flex;
  flex-direction: column;
  background: white;
  z-index: 100;
  transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1); /* Smooth slide */
  border-radius: 20px 0 0 20px; /* Rounded corners on the left */
  box-shadow: -10px 0 30px rgba(0,0,0,0.1);
}

.side-cart.show {
  right: 0;
}

/* Make the cart header look cleaner */
.cart-header {
  padding: 20px;
  display: flex;
  align-items: center;
  gap: 15px;
  font-weight: 700;
  font-size: 18px;
  border-bottom: 1px solid #f1f5f9;
}

.cart-header i {
  cursor: pointer;
  font-size: 20px;
}
.cart-backdrop.show {
  opacity: 1;
  pointer-events: auto;
}


/* ===== CART BODY ===== */
.cart-body {
  padding: 12px;
  overflow-y: auto;
  flex: 1;
}

/* ===== CART ITEM ===== */
.cart-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: #fff;
  border-radius: 16px; /* Match the rounded look */
  margin-bottom: 12px;
  border: 1px solid #f1f5f9; /* Subtle border instead of heavy shadow */
}

.cart-item img {
  width: 50px; /* Slightly smaller image */
  height: 50px;
  border-radius: 10px;
}

.item-info {
  flex: 1;
}

.item-info h4 {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
}

.item-info span {
  font-size: 13px;
  color: #6b7280;
}

/* ===== QTY CONTROL ===== */
.qty {
  display: flex;
  align-items: center;
  gap: 6px;
}

.qty button {
  width: 28px;
  height: 28px;
  border-radius: 8px;
  border: none;
  background: #f3f4f6;
  font-size: 16px;
  cursor: pointer;
}

.qty span {
  min-width: 18px;
  text-align: center;
  font-weight: 600;
}

/* ===== CART FOOTER ===== */
.cart-footer {
  border-top: 1px solid #eee;
  padding: 14px;
  background: white;
}


.total-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
  font-size: 15px;
}

@media(max-width: 480px) {
  .side-cart {
    width: 100%;    /* Full width on very small phones */
    height: 100vh;
    top: 0;
    border-radius: 0;
  }
}
.checkout-btn {
  width: 100%;
  padding: 14px;
  background: #ec407a;
  color: white;
  border: none;
  border-radius: 14px;
  font-size: 16px;
  font-weight: 600;
}


.address-backdrop {
  display: none;               /* üîë REQUIRED */
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  z-index: 120;
}

.address-backdrop.show {
  display: block;
}

.address-modal {
  position: fixed;
  left: 50%;
  bottom: -100%;
  transform: translateX(-50%);
  width: 420px;
  max-width: 95%;
  background: white;
  border-radius: 20px 20px 0 0;
  z-index: 130;
  transition: 0.35s ease;
}

.address-modal.show {
  bottom: 0;
}

.best-row {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  padding-bottom: 8px;
}

.best-card {
  min-width: 140px;
  background: white;
  border-radius: 14px;
  padding: 10px;
  border: 1px solid var(--border);
  text-align: center;
}

.best-card img {
  width: 70px;
  height: 70px;
  object-fit: contain;
}
.filter-content {
  margin: auto;
  background: white;
  padding: 20px;
  width: 320px;
  border-radius: 16px;
  box-shadow: 0 20px 40px rgba(0,0,0,.25);
}

/* ================= ADDRESS MODAL (FIXED UI) ================= */

.address-backdrop {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  z-index: 120;
}

.address-backdrop.show {
  display: block;
}

.address-modal {
  position: fixed;
  left: 50%;
  bottom: -100%;
  transform: translateX(-50%);
  width: 420px;
  max-width: 92%;
  background: white;
  border-radius: 20px 20px 0 0;
  z-index: 130;
  transition: bottom 0.35s ease;
  box-shadow: 0 -10px 30px rgba(0,0,0,.15);
}

.address-modal.show {
  bottom: 0;
}

/* Header */
.address-header {
  padding: 16px 18px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 16px;
  font-weight: 700;
  border-bottom: 1px solid #e5e7eb;
}

.address-header i {
  font-size: 22px;
  cursor: pointer;
  color: #6b7280;
}

/* Body */
.address-body {
  padding: 16px 18px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.address-body input {
  width: 100%;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  font-size: 14px;
  outline: none;
}

.address-body input:focus {
  border-color: #700457;
}

/* Footer */
.address-footer {
  padding: 16px 18px;
  border-top: 1px solid #e5e7eb;
}

.address-footer button {
  width: 100%;
  padding: 14px;
  border-radius: 14px;
  border: none;
  background: #22c55e;
  color: white;
  font-size: 15px;
  font-weight: 700;
  cursor: pointer;
}

/* ================= FILTER MODAL (FIXED UI) ================= */

.filter-modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  z-index: 110;
}

.filter-modal.show {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Panel */
.filter-content {
  background: white;
  width: 360px;
  max-width: 92%;
  border-radius: 18px;
  padding: 18px;
  box-shadow: 0 20px 40px rgba(0,0,0,.25);
}

/* Title */
.filter-content h3 {
  margin: 0 0 14px;
  font-size: 16px;
  font-weight: 700;
}

/* Fields */
.filter-content label {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: 13px;
  margin-bottom: 12px;
  color: #374151;
}

.filter-content input {
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  font-size: 14px;
  outline: none;
}

.filter-content input:focus {
  border-color: #700457;
}

/* Actions */
.filter-actions {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}

.filter-actions button {
  flex: 1;
  padding: 12px;
  border-radius: 12px;
  border: none;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
}

#resetBtn {
  background: #f3f4f6;
  color: #111827;
}

#applyBtn {
  background: #700457;
  color: white;
}

@media(max-width:768px){
  .grid{grid-template-columns:repeat(2,1fr)}
  .side-cart{right:-100%}
  .side-cart.show{right:0}
}

/* ================= LARGE MARKETPLACE FOOTER ================= */
.marketplace-footer {
  background: #fcfcfc;
  padding: 60px 24px 20px;
  border-top: 1px solid #eee;
  font-family: 'Plus Jakarta Sans', sans-serif;
}

.about-section {
  max-width: 800px;
  margin: 0 auto;
  padding: 60px 24px;
  text-align: center;
}

.about-section h2 {
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: 32px;
  font-weight: 800;
  color: var(--primary); /* Using your brand purple */
  margin-bottom: 24px;
  letter-spacing: -1px;
}

/* Bottom Bar with Socials */
.footer-bottom {
  border-top: 1px solid #eee;
  padding-top: 30px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 20px;
}

/* ================= CENTERED FOOTER ALIGNMENT ================= */
.footer-container {
  max-width: 1200px;
  margin: 0 auto;
  text-align: center; /* üîë Centers all text headings and list items */
}

.footer-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 30px;
  margin-bottom: 50px;
  justify-items: center; /* üîë Centers the columns themselves */
}

.footer-col ul {
  list-style: none;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: center; /* üîë Centers the actual links */
}

.footer-bottom {
  border-top: 1px solid #eee;
  padding: 40px 20px;
  display: flex;
  flex-direction: column; /* üîë Stack elements vertically for center alignment */
  align-items: center;
  gap: 25px;
}

.copyright-info {
  text-align: center; /* üîë Centers the multi-line legal text */
  font-size: 13px;
  color: #94a3b8;
  max-width: 800px;
  line-height: 1.6;
}

.app-download-btns, 
.social-links {
  display: flex;
  justify-content: center; /* üîë Centers buttons and icons horizontally */
  gap: 15px;
}
.app-download-btns img {
  height: 35px;
  cursor: pointer;
}

.social-links i {
  font-size: 20px;
  color: #1f2937;
  cursor: pointer;
}

</style>
</head>

<body>
<main>

<header>
  <div class="header-top">
    <div>
      <div class="brand">
        <img src="./images/grokerly_logo.png" alt="Grokly Logo" class="logo"> 
        <span>Grokly</span>
      </div>
      <div class="subtitle">Fresh groceries, fast</div>
    </div>
  </div>

  <div class="header-row">
    <div class="search-bar">
      <i class="ri-search-line"></i>
      <input placeholder="Search groceries">
    </div>
    <div class="icon-btn" id="filterBtn">
      <i class="ri-equalizer-line"></i>
    </div>

    <div class="icon-btn" id="cartBtn">
      <i class="ri-shopping-cart-line"></i>
      <span class="cart-badge" id="cart-count">0</span>
    </div>
  </div>
</header>

<section class="banner">
  <div class="banner-card">
    <img src="./images/IMG_5097.JPG" alt="Special Offer" class="banner-img">
    
    <div class="banner-overlay"></div>
    
    <div class="banner-content">
      <h2>Fresh groceries delivered</h2>
      <p>Fruits, vegetables, dairy & more</p>
    </div>
  </div>
</section>

<!-- BEST SELLERS -->
<section class="best-sellers">
  <h4 class="section-title">Best Sellers üî•</h4>
  <div class="best-row" id="bestRow"></div>
</section>

<!-- CATEGORIES -->
<section class="categories">
  <h4 class="section-title">Categories</h4>
  <div class="topic-row" id="categoryNav"></div>
</section>

<!-- ALL PRODUCTS -->
<h4 class="section-title">All Products</h4>
<div class="grid" id="grid"></div>


<!-- CART -->
<div class="cart-backdrop" id="cartBackdrop"></div>

<aside class="side-cart" id="cartView">

  <div class="cart-header">
    <i class="ri-arrow-left-line" id="closeCart"></i>
    <span>Your Cart</span>
  </div>

  <div class="cart-body" id="cartItems"></div>

  <div class="cart-footer">
    <div class="total-row">
      <span>Total</span>
      <strong id="cartTotal">‚Çπ40</strong>
    </div>
    <button class="checkout-btn">Checkout</button>
  </div>

</aside>


<div class="address-backdrop" id="addressBackdrop"></div>

<div class="address-modal" id="addressModal">
  <div class="address-header">
    <span>Add Delivery Address</span>
    <i class="ri-close-line" id="closeAddress"></i>
  </div>

  <div class="address-body">
    <input id="addrName" placeholder="Full Name">
    <input id="addrPhone" placeholder="Phone Number">
    <input id="addrHouse" placeholder="House / Flat No.">
    <input id="addrStreet" placeholder="Area / Street">
    <input id="addrCity" value="Bengaluru">
    <input id="addrPin" placeholder="Pincode">
  </div>

  <div class="address-footer">
    <button id="saveAddressBtn">Save & Continue</button>
  </div>
</div>

<!-- FILTER MODAL -->
<div class="filter-modal" id="filterModal">
  <div class="filter-content">
    <h3>Filter Products</h3>
    <label>
      Category
      <select id="fCategory">
        <option value="">All</option>
        <option value="Fruits and Vegetables">Fruits and Vegetables</option>
        <option value="Beverages">Beverages</option>
        <option value="Diary and Bakery">Diary and Bakery</option>
        <option value="All">All</option>
      </select>
    </label>

    <label>
      Max Price
      <input id="fPrice" type="number" placeholder="e.g. 500">
    </label>
    <div class="filter-actions">
      <button id="resetBtn">Reset</button>
      <button id="applyBtn">Apply</button>
    </div>
  </div>
</div>

<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm'

  /* ================= SUPABASE ================= */
  const supabase = createClient(
    'https://jgliqmqielkvncjpiowx.supabase.co',
    'sb_publishable_XXKvo7uRkmGIKmYK-xIxhg_an2IvBTO'
  )

  /* ================= STATE ================= */
  let products = []
  let filtered = []
  let cart = JSON.parse(localStorage.getItem('cart')) || []

  /* ================= ELEMENTS ================= */
  const grid = document.getElementById('grid')
  const categoryNav = document.getElementById('categoryNav')
  const bestRow = document.getElementById('bestRow')

  const cartBtn = document.getElementById('cartBtn')
  const cartView = document.getElementById('cartView')
  const cartBackdrop = document.getElementById('cartBackdrop')
  const closeCart = document.getElementById('closeCart')
  const cartItems = document.getElementById('cartItems')
  const cartCount = document.getElementById('cart-count')

  const filterBtn = document.getElementById('filterBtn')
  const filterModal = document.getElementById('filterModal')
  const applyBtn = document.getElementById('applyBtn')
  const resetBtn = document.getElementById('resetBtn')
  const fCategory = document.getElementById('fCategory')
  const fPrice = document.getElementById('fPrice')

  const addressBackdrop = document.getElementById('addressBackdrop')
  const addressModal = document.getElementById('addressModal')
  const closeAddress = document.getElementById('closeAddress')
  const saveAddressBtn = document.getElementById('saveAddressBtn')

  /* ================= SAFE UI RESET ================= */
  filterModal.classList.remove('show')
  addressBackdrop.classList.remove('show')
  addressModal.classList.remove('show')
  cartView.classList.remove('show')
  cartBackdrop.classList.remove('show')


  /* ================= INIT ================= */
  closeCartView()
  updateBadge()
  loadProducts()

  /* ================= HELPERS ================= */
  const normalize = s =>
    s?.toLowerCase().replace(/(^|\s)\S/g, l => l.toUpperCase())

  /* ================= LOAD PRODUCTS ================= */
  async function loadProducts() {
    const { data, error } = await supabase.from('products').select('*')
    if (error) {
      console.error(error)
      return
    }

    products = data
    filtered = [...products]

    renderBestSellers()
    renderCategories()
    renderProducts()
  }

  /* ================= BEST SELLERS ================= */
  function renderBestSellers() {
    const best = products
      .filter(p => p.best_seller === true || p.rating >= 4.5)
      .slice(0, 10)

    bestRow.innerHTML = best.map(p => `
      <div class="best-card">
        <img src="${p.image_url}">
        <div>${p.title}</div>
        <strong>‚Çπ${p.price}</strong>
        <button class="add-btn" data-id="${p.id}">ADD</button>
      </div>
    `).join('')
  }

  /* ================= CATEGORIES ================= */
  function renderCategories() {
    const categories = [
      { label: 'All', value: '' },
      { label: 'Fruits and Vegetables', value: 'Fruits and Vegetables' },
      { label: 'Beverages', value: 'Beverages' },
      { label:'Diary & Bakery', value:'Diary & Bakery'}
    ]

    categoryNav.innerHTML = categories.map((c, i) => `
      <div class="topic-pill ${i === 0 ? 'active' : ''}" data-cat="${c.value}">
        ${c.label}
      </div>
    `).join('')
  }


  categoryNav.addEventListener('click', e => {
    const pill = e.target.closest('.topic-pill')
    if (!pill) return

    document.querySelectorAll('.topic-pill')
      .forEach(p => p.classList.remove('active'))

    pill.classList.add('active')

    const cat = pill.dataset.cat

    filtered = cat
      ? products.filter(p => p.category === cat)
      : [...products]

    renderProducts()
  })

  /* ================= PRODUCTS GRID ================= */
  function renderProducts() {
    grid.innerHTML = filtered.map(p => `
      <div class="card">
        <div class="card-img">
          <img src="${p.image_url}">
        </div>
        <div class="card-title">${p.title}</div>
        <div class="card-desc">${p.description || ''}</div>
        <div class="card-footer">
          ‚Çπ${p.price}
          <button class="add-btn" data-id="${p.id}">ADD</button>
        </div>
      </div>
    `).join('')
  }

  /* ================= ADD TO CART (EVENT DELEGATION) ================= */
  document.addEventListener('click', e => {
    if (e.target.classList.contains('add-btn')) {
      const id = Number(e.target.dataset.id)
      addToCart(id)
    }
  })

  function addToCart(id) {
    const product = products.find(p => p.id === id)
    if (!product) return

    const item = cart.find(i => i.id === id)
    item ? item.qty++ : cart.push({ ...product, qty: 1 })

    saveCart()
  }

  /* ================= CART ================= */
  function saveCart() {
    localStorage.setItem('cart', JSON.stringify(cart))
    updateBadge()
    renderCart()
  }

  function updateBadge() {
    cartCount.innerText = cart.reduce((s, i) => s + i.qty, 0)
  }

  /* ================= CART UI ================= */
  cartBtn.onclick = () => {
    renderCart()
    cartView.classList.add('show')
    cartBackdrop.classList.add('show')
  }

  function closeCartView() {
    cartView.classList.remove('show')
    cartBackdrop.classList.remove('show')
  }

  closeCart.onclick = closeCartView
  cartBackdrop.onclick = closeCartView

  function renderCart() {
    if (!cart.length) {
      cartItems.innerHTML = `
        <p style="text-align:center;color:#6b7280;margin-top:40px">
          Your cart is empty üõí
        </p>
      `
      document.getElementById('cartTotal').innerText = '‚Çπ0'
      return
    }

    let total = 0

    cartItems.innerHTML = cart.map((i, idx) => {
      total += i.price * i.qty
      return `
        <div class="cart-item">
          <img src="${i.image_url}">
          <div class="item-info">
            <h4>${i.title}</h4>
            <span>‚Çπ${i.price}</span>
          </div>
          <div class="qty">
            <button data-i="${idx}" data-d="-1">‚àí</button>
            <span>${i.qty}</span>
            <button data-i="${idx}" data-d="1">+</button>
          </div>
        </div>
      `
    }).join('')

    document.getElementById('cartTotal').innerText = `‚Çπ${total}`
  }


  /* Quantity buttons */
  document.addEventListener('click', e => {
    if (e.target.dataset.i) {
      const i = Number(e.target.dataset.i)
      const d = Number(e.target.dataset.d)
      cart[i].qty += d
      if (cart[i].qty <= 0) cart.splice(i, 1)
      saveCart()
    }
  })

  /* ================= ADDRESS MODAL ================= */
  const checkoutBtn = document.querySelector('.checkout-btn'); // FIXED SELECTOR

  // Define inputs for address
  const addrName = document.getElementById('addrName');
  const addrPhone = document.getElementById('addrPhone');
  const addrHouse = document.getElementById('addrHouse');
  const addrStreet = document.getElementById('addrStreet');
  const addrCity = document.getElementById('addrCity');
  const addrPin = document.getElementById('addrPin');

  // open address modal
  checkoutBtn.addEventListener('click', () => {
    if (!cart.length) {
      alert('Your cart is empty');
      return;
    }
    addressBackdrop.classList.add('show');
    addressModal.classList.add('show');
  });

  // close modal
  function closeAddressModal() {
    addressBackdrop.classList.remove('show');
    addressModal.classList.remove('show');
  }

  closeAddress.addEventListener('click', closeAddressModal);
  addressBackdrop.addEventListener('click', closeAddressModal);

  // save address
  saveAddressBtn.addEventListener('click', () => {
    const address = {
      name: addrName.value.trim(),
      phone: addrPhone.value.trim(),
      house: addrHouse.value.trim(),
      street: addrStreet.value.trim(),
      city: addrCity.value.trim(),
      pin: addrPin.value.trim()
    };

    if (!address.name || !address.phone || !address.house || !address.pin) {
      alert('Please fill all required fields');
      return;
    }

    localStorage.setItem('delivery_address', JSON.stringify(address));
    closeAddressModal();
    alert('Address saved! Ready to place order üöÄ');
  });

  /* ================= FILTER ================= */
  filterBtn.onclick = () => filterModal.classList.add('show');

  filterModal.addEventListener('click', e => {
    if (e.target.classList.contains('filter-modal')) {
      filterModal.classList.remove('show');
    }
  });

  applyBtn.onclick = () => {
    const selected = fCategory.value;
    const max = Number(fPrice.value) || Infinity;

    filtered = products.filter(p => {
      const matchCategory =
        !selected ||
        selected === 'All' ||
        p.category === selected;

      const matchPrice = p.price <= max;
      return matchCategory && matchPrice;
    });

    renderProducts();
    filterModal.classList.remove('show');
  };

  resetBtn.onclick = () => {
    fCategory.value = '';
    fPrice.value = '';
    filtered = [...products];
    renderProducts();
  };
  /* ================= FILTER ================= */
  filterBtn.onclick = () => filterModal.classList.add('show')

  filterModal.addEventListener('click', e => {
    if (e.target.classList.contains('filter-modal')) {
      filterModal.classList.remove('show')
    }
  })

  applyBtn.onclick = () => {
    const selected = fCategory.value
    const max = Number(fPrice.value) || Infinity

    filtered = products.filter(p => {
      const matchCategory =
        !selected ||
        selected === 'All' ||
        p.category === selected

      const matchPrice = p.price <= max

      return matchCategory && matchPrice
    })

    renderProducts()
    filterModal.classList.remove('show')
  }


  resetBtn.onclick = () => {
    fCategory.value = ''
    fPrice.value = ''
    filtered = [...products]
    renderProducts()
  }
</script>
</main>
<footer class="marketplace-footer">
    <section class="about-section">
      <h2>About Grokly</h2>
      <p>
        Grokly is Accesco Living's flagship grocery platform designed to bring 
        freshness and convenience to your doorstep. We bridge the gap between 
        local farms and your kitchen, ensuring that every product meets the 
        highest standards of quality and hygiene.
      </p>
      <p>
        By leveraging smart technology and a robust supply chain, Grokly delivers 
        daily essentials that are thoughtfully sourced and carefully handled. 
        Our mission is to simplify smarter living through authenticity, 
        speed, and a deep respect for fresh produce.
      </p>
      <p><strong>Grokly by Accesco Living ‚Äî Freshness in every click.</strong></p>
    </section>

    <div class="footer-bottom">
      <div class="copyright-info">
        ¬© Grokly Market Private Limited, 2025. <br>
        ‚ÄúGrokly‚Äù is owned & managed by ‚ÄúAccesco Living‚Äù and is not related, linked or interconnected in whatsoever manner or nature to other domains.
      </div>

      <div class="app-download-btns">
        <img src="https://upload.wikimedia.org/wikipedia/commons/3/3c/Download_on_the_App_Store_Badge.svg" alt="App Store">
        <img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Play Store">
      </div>

      <div class="social-links">
      <a href="https://www.facebook.com/p/Accesco-Living-61585132566972/" class="social-icon" target="_blank" aria-label="Facebook">
        <i class="ri-facebook-fill"></i>
      </a>
      
      <a href="https://x.com/accesco_living?s=21" class="social-icon" target="_blank" aria-label="Twitter">
        <i class="ri-twitter-x-line"></i>
      </a>
      
      <a href="https://www.instagram.com/accescoliving?igsh=MWVxOHpyeW96NGltZQ==" class="social-icon" target="_blank" aria-label="Instagram">
        <i class="ri-instagram-line"></i>
      </a>
      
      <a href="https://www.linkedin.com/company/acceso-living/" class="social-icon" target="_blank" aria-label="LinkedIn">
        <i class="ri-linkedin-box-fill"></i>
      </a>

      <a href="https://youtube.com/@accescoliving?si=YqfNRXvc0SRm4s8g" class="social-icon" target="_blank" aria-label="LinkedIn">
        <i class="ri-youtube-fill"></i>
      </a>
  </div>
    </div>
  </div>
</footer>
</body>
</html>
